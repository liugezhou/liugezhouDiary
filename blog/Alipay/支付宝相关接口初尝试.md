### 支付宝相关接口初尝试
---
> 本周(20191118-20191122)在写关于支付宝登录、支付宝支付、支付宝签约相关方面的接口对接。 
> 这篇博文做一个初次接触支付宝相关接口时的思路整理，为了在下次有相关需求或者开发新的业务时，能对之前的业务流程做一个快速的回顾。

#### [签名专区](https://docs.open.alipay.com/291/106103/)
---
> 为了安全，我们在调用接口前，需要配置双方密钥.密钥包含`应用私钥（APP_PRIVATE_KEY）`和`应用公钥（APP_PUBLIC_KEY）`.     
> 生成密钥后，开发者需要在开放平台开发者中心进行密钥配置，配置完成后可以获取支付宝公钥（ALIPAY_PUBLIC_KEY）应用在代码中，对请求内容进行签名。
> 点击标题转至相关链接进行配置。 

#### [生活号获取用户信息](https://docs.alipay.com/fw/api/105942)
---
> 用户在支付宝生活号中访问开发的的第三方网页，开发者可以通过网页授权机制，来获取用户的基本信息，以实现相应的业务逻辑；      
> 网页授权采取标准的OAuth 2.0授权体系.授权流程如下：    

> 1. 按照规则拼接授权页面的链接，并且引导用户跳转至该链接； 
>   这里需要`前端开发者`通过URL拼接方案，构造授权页面，引导用户授权，且前端需要明确URL拼接参数的含义,如一定要区分scope的auth_user与auth_base的区别。   
> 2. 用户在授权页面上确认授权后，将跳转到开发者指定的回调页，并且带上auth_code； 
>   当用户授权成功后，会跳转至开发者定义的回调页面,支付宝会在回调页面请求中加入参数，包括auth_code、app_id、scope等.  
>   这里需要`前端开发者`将获取到的auth_code调用后端接口，获取用户信息。          
> 3. 开发者通过auth_code换取access_token及用户的userId；    
>   `后端开发者`通过获取到的auth_code换取access_token和用户userId。【auth_code只能使用一次，一天未被使用自动过期】。    
> 4. 如果需要除userId以外的其他信息，则使用access_token调用用户信息共享接口获取。   
>   如果scope=auth_base，在第三步就可以获取到用户的userId，无需走第四步。   
>   如果scope=auth_user，才需要走第四步，通过access_token调用用户信息共享接口获取用户信息.   